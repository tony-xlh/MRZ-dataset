import{Q as C}from"./QBtn.73b60384.js";import{m as S,u as T,r as n,b as k,s as v,O as g,A as s,C as U,ae as E,Q as L,R as O,U as I,S as _,D as P,P as V,x as J}from"./index.bc444c79.js";import{b as z,l as r,B as F,g as f,i as M}from"./utils.022943bc.js";import{u as Q}from"./use-meta.dab633ad.js";const q={class:"q-pa-md example-row-equal-width"},A={class:"row"},G={class:"col",style:{"padding-right":"10px"}},W=s("div",null,[s("label",{style:{"font-size":"16px"}},"Engines:")],-1),H={class:"row",style:{"padding-bottom":"20px"}},K=["value"],X={class:"row results"},Y={style:{"max-height":"75vh",overflow:"auto"}},Z=["src"],$={key:0},ee={class:"row"},ne=S({__name:"DetailsPage",setup(te){const u=T(),o=n(""),l=n(""),c=n(""),w=n([]),N=n(0),b=n(0),p=n(""),m=n([]),y=n("");k(async()=>{o.value=u.currentRoute.value.params.name,l.value=u.currentRoute.value.params.imageName,c.value=u.currentRoute.value.params.engine;const a=await z(u.currentRoute.value.params.name);w.value=a,Q({title:"Barcode Reading Benchmark - "+o.value+" - "+l.value}),R(),x(u.currentRoute.value.params.engine)});const R=async()=>{const a=await r.getItem(o.value+":image:"+l.value);if(a){let e=new Image;e.src=a,e.onload=function(){N.value=e.width,b.value=e.height,p.value=a}}else{const t=await(await fetch("./dataset/"+o.value+"/"+l.value)).blob();if(t.size>0){const i=await F(t);await r.setItem(o.value+":image:"+l.value,i),R()}}},x=async(a,e)=>{let t;if(a?t=a:t=c.value,e)m.value=e.results;else{const d=await r.getItem(o.value+":detectionResult:"+f(l.value)+"-"+t+".json");d?(e=JSON.parse(d),e&&(m.value=e.results)):m.value=[]}const i=await r.getItem(o.value+":groundTruth:"+f(l.value)+".txt");i&&(y.value=i)},j=a=>{c.value=a,x(a)},B=async()=>{r.removeItem(o.value+":image:"+l.value),r.removeItem(o.value+":groundTruth:"+f(l.value)+".txt");const a=await r.getItem("projects");if(a){const e=JSON.parse(a);for(let t=0;t<e.length;t++)if(e[t].info.name===o.value){const i=e[t],d=[];for(let h=0;h<i.info.images.length;h++){const D=i.info.images[h];D!=l.value&&d.push(D)}i.info.images=d}await r.setItem("projects",JSON.stringify(e)),alert("deleted")}};return(a,e)=>(v(),g("div",q,[s("div",A,[s("div",G,[W,s("div",H,[U(s("select",{"onUpdate:modelValue":[e[0]||(e[0]=t=>c.value=t),e[1]||(e[1]=t=>j(t))],style:{"min-width":"200px"}},[(v(!0),g(L,null,O(w.value,t=>(v(),g("option",{value:t.displayName,key:"engine-"+t.displayName},_(t.displayName),9,K))),128))],512),[[E,c.value]])]),s("div",X,[s("div",null,[s("div",null,[I(" Ground Truth: "),s("pre",null,_(y.value),1)]),s("div",null,[I(" Detection Result: "),s("pre",null,_(P(M)(m.value)),1)])])]),s("div",Y,[s("img",{class:"mrz-image",src:p.value,alt:"image"},null,8,Z)]),p.value?V("",!0):(v(),g("div",$,"Downloading... "))])]),s("div",ee,[J(C,{outline:"",color:"red",label:"Delete this image",onClick:B})])]))}});export{ne as default};
