import{Q as C}from"./QBtn.d53ca10c.js";import{m as S,u as T,r as n,b as k,s as v,O as g,A as s,C as L,ae as U,Q as E,R as O,U as I,S as _,D as P,P as V,x as F}from"./index.d7e94690.js";import{g as J,l as z,B as M,b as f,i as Q}from"./utils.9a20fa8f.js";import{u as q}from"./use-meta.f6839d48.js";const A={class:"q-pa-md example-row-equal-width"},G={class:"row"},W={class:"col",style:{"padding-right":"10px"}},H=s("div",null,[s("label",{style:{"font-size":"16px"}},"Engines:")],-1),K={class:"row",style:{"padding-bottom":"20px"}},X=["value"],Y={class:"row results"},Z={style:{"max-height":"75vh",overflow:"auto"}},$=["src"],ee={key:0},te={class:"row"},ie=S({__name:"DetailsPage",setup(ae){const u=T(),o=n(""),l=n(""),c=n(""),w=n([]),N=n(0),b=n(0),p=n(""),m=n([]),y=n("");let i=J();k(async()=>{o.value=u.currentRoute.value.params.name,l.value=u.currentRoute.value.params.imageName,c.value=u.currentRoute.value.params.engine;const a=await z(u.currentRoute.value.params.name);w.value=a,q({title:"Barcode Reading Benchmark - "+o.value+" - "+l.value}),R(),x(u.currentRoute.value.params.engine)});const R=async()=>{const a=await i.getItem(o.value+":image:"+l.value);if(a){let e=new Image;e.src=a,e.onload=function(){N.value=e.width,b.value=e.height,p.value=a}}else{const t=await(await fetch("./dataset/"+o.value+"/"+l.value)).blob();if(t.size>0){const r=await M(t);await i.setItem(o.value+":image:"+l.value,r),R()}}},x=async(a,e)=>{let t;if(a?t=a:t=c.value,e)m.value=e.results;else{const d=await i.getItem(o.value+":detectionResult:"+f(l.value)+"-"+t+".json");d?(e=JSON.parse(d),e&&(m.value=e.results)):m.value=[]}const r=await i.getItem(o.value+":groundTruth:"+f(l.value)+".txt");r&&(y.value=r)},j=a=>{c.value=a,x(a)},B=async()=>{i.removeItem(o.value+":image:"+l.value),i.removeItem(o.value+":groundTruth:"+f(l.value)+".txt");const a=await i.getItem("projects");if(a){const e=JSON.parse(a);for(let t=0;t<e.length;t++)if(e[t].info.name===o.value){const r=e[t],d=[];for(let h=0;h<r.info.images.length;h++){const D=r.info.images[h];D!=l.value&&d.push(D)}r.info.images=d}await i.setItem("projects",JSON.stringify(e)),alert("deleted")}};return(a,e)=>(v(),g("div",A,[s("div",G,[s("div",W,[H,s("div",K,[L(s("select",{"onUpdate:modelValue":[e[0]||(e[0]=t=>c.value=t),e[1]||(e[1]=t=>j(t))],style:{"min-width":"200px"}},[(v(!0),g(E,null,O(w.value,t=>(v(),g("option",{value:t.displayName,key:"engine-"+t.displayName},_(t.displayName),9,X))),128))],512),[[U,c.value]])]),s("div",Y,[s("div",null,[s("div",null,[I(" Ground Truth: "),s("pre",null,_(y.value),1)]),s("div",null,[I(" Detection Result: "),s("pre",null,_(P(Q)(m.value)),1)])])]),s("div",Z,[s("img",{class:"mrz-image",src:p.value,alt:"image"},null,8,$)]),p.value?V("",!0):(v(),g("div",ee,"Downloading... "))])]),s("div",te,[F(C,{outline:"",color:"red",label:"Delete this image",onClick:B})])]))}});export{ie as default};
